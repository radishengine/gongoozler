<!DOCTYPE html>
<html>
  <head>
    <title>gongoozler</title>
    <script type='text/javascript' src='path-data-polyfill.js'></script>
    <style>
      /*
      #screen {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        outline: 1px solid silver;
      }
      */
      #screen-container {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
      }
      #screen-back {
        width: 100%;
        height: 100%;
        fill: #000;
      }
      #viewport-border {
        stroke: #444;
      }
    </style>
  </head>
  <body>
    <svg id='screen-container'>
      <rect id='screen-back'></rect>
      <g id='viewport'>
        <rect id='viewport-border' x='-1' y='-1'></rect>
      </g>
    </svg>
    <script>
      var screenBack = document.getElementById('screen-back');
      var screenEl = document.getElementById('screen-container');
      var viewportEl = document.getElementById('viewport');
      var viewportBorder = document.getElementById('viewport-border');
      var sceneWidth = 320;
      var sceneHeight = 200;
      function updateViewBox() {
        var screenRect = screenEl.getBoundingClientRect();
        var w = Math.round((screenRect.right - screenRect.left) * window.devicePixelRatio);
        var h = Math.round((screenRect.bottom - screenRect.top) * window.devicePixelRatio);
        screenEl.setAttribute('viewBox', '0 0 '+w+' '+h);
        screenBack.setAttribute('width', w);
        screenBack.setAttribute('height', h);
        var scale = 1;
        while (((scale+1)*sceneWidth) <= w && ((scale+1)*sceneHeight) <= h) scale++;
        viewportEl.setAttribute('transform', 'translate('
                                + (Math.floor((w-(scale * sceneWidth))/2)+0.5)
                                + ','
                                + (Math.floor((h-(scale * sceneHeight))/2)+0.5));
        viewportBorder.setAttribute('width', sceneWidth * scale + 2);
        viewportBorder.setAttribute('height', sceneHeight * scale + 2);
      }
      window.addEventListener('resize', updateViewBox);
      updateViewBox();
    </script>
      <!--
    <svg id='screen' width='640' height='400' viewBox='0 0 640 400'>
      <metadata>
        <scene xmlns='gongoozler'>
          
        </scene>
      </metadata>
      <path d='M 93.944187,321.8248 93.944187,49.083607' fill='none' stroke='black'></path>
      <path d='M 297.995,316.77405 C 298.9696,264.32735 225.23292,157.53289 322.23866,53.124217' fill='none' stroke='black'></path>
      <path d='
         M 524.26917,321.82481
         C 526.77678,249.13445 585.86293,248.21503 517.42565,188.14617
           448.98837,128.07731 525.76885,123.00622 522.24886,60.195287
      ' fill='none' stroke='black'></path>
    </svg>
    <script>
      document.createSVGElement = function createSVGElement(name) {
        return document.createElementNS("http://www.w3.org/2000/svg", name);
      };
      function between(v1, v2) {
        return v1 + (v2-v1) * (
          Math.random() + Math.random() + Math.random()
          + Math.random() + Math.random() + Math.random()
        )/6;
      }
      var screen = document.getElementById('screen');
      for (var el = screen.firstElementChild; el; el = el.nextElementSibling) {
        var pathData = el.getPathData({normalize:true});
        console.log(pathData);
      }
    </script>
      -->
  </body>
</html>
